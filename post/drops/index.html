<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>Easy Filesharing with Dropzone3 and Rackspace Cloud Files</title>
  <link href="http://albush.com/css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="http://albush.com/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css">
  <style type="text/css">
  
    footer.page-footer{background-image: url(http://drops.albush.com/background-cover.jpg);}
  
  </style>
</head>
<body>
  <div id="index-banner" class="parallax-container">
    <div class="section no-pad-bot">
      <div class="container">
        <h1 class="header center teal-text text-lighten-2"><a href="http://albush.com">Alan Bush&#39;s Blog</a></h1>
        <div class="row center">
          <h5 class="header col s12 light">Mustachioed Cloud Technology Mentor by day; Daddy, Husband and Improvisor by night.</h5>
        </div>
        <div class="row center">
        
          <a href="https://github.com/albush"><img src="http://albush.com/images/github2-dreamstale35.png"></a>
        
        
        
          <a href="https://twitter.com/alanbush"><img src="http://albush.com/images/twitter-dreamstale71.png"></a>
        
        
          <a href="https://google.com/+AlanBush"><img src="http://albush.com/images/gplus48x48.png"></a>
        
        
          <a href="https://www.linkedin.com/in/adbush"><img src="http://albush.com/images/linkedin-dreamstale45.png"></a>
        
          <a href="http://albush.com/index.xml"><img src="http://albush.com/images/feed-dreamstale27.png"></a>
        </div>
      </div>
    </div>
    <div class="parallax">
    
      <img src="http://share.albush.com/fyKF4BgPAO/background.jpg">
    
    </div>
  </div>



<div class="container">
  <div class="section">

    <div class="row">
      <div class="col s12">
        <div class="card-panel">
          <h4>Easy Filesharing with Dropzone3 and Rackspace Cloud Files</h4>
          <p>
           
          </p>
          <p>

<p><img class="img-responsive" src="//drops.albush.com/andtherewasmuchrejoicing.gif"></p>

<p>From time to time I need to quickly share an image or file with a colleague, a friend or client, and that&rsquo;s usually something I would do on a one-off basis by emailing, or uploading to Dropbox or something. This is a pretty easy workflow, but it could probably be easier, right? That&rsquo;s where <a href="http://www.alexchiri.com/">Alex Chiri</a> and his <a href="https://aptonic.com/dropzone3/">Dropzone</a> action come in.</p>

<p>If you&rsquo;re not familiar, Dropzone is a great little Mac utility that allows you to perform quick actions by dragging a file up to the icon on the menu bar. <strong>Disclosure:</strong> After tweeting about how cool I thought this was, Aptonic Software provided me with a free copy of Dropzone 3. This blog post is unsolicited. Some default actions are to upload to Dropbox, but Dropzone also has pretty solid development options, and that&rsquo;s where Alex Chiri comes in. As he outlined <a href="http://www.alexchiri.com/rackspace-cloud-files-action-for-dropzone-3/">here</a> in his blog post, with some prompt help from John at Dropzone, Alex was able to create an action for Dropzone to upload to Rackspace Cloud Files, and then copy the resulting CDN enabled url to the clipboard.</p>

<p>I saw this blog post and instantly saw where this would be valuable. Now, when I want to send a file to a customer or friend, I can quickly upload it to my own Cloud Files container and send them the link via IM, email, or any other medium. To make it even easier to access, I added a CNAME record, so that I can send a more clean url. Alex then added a feature to specify that CNAME in the initial action configuration. Now, all of my drops have a much easier to remember url. Of course this is best for times that I don&rsquo;t mind if <em>anyone</em> comes by and takes a look - I wouldn&rsquo;t ever use this method for confidential items.</p>

<h2 id="adding-a-file-index:d55c0d1a625ae9c8eabb6790bfe0a785">Adding a file index</h2>

<p>After setting up the Dropzone action and the CNAME for easy access, I wanted to be able to see all of the files I&rsquo;ve already uploaded. Fortunately Rackspace Cloud Files API has the ability to set a container to list the contents of a container as if it were an index or table of contents. This process requires a bit of command line work, but it&rsquo;s not too difficult to figure out.</p>

<h4 id="find-your-token-and-endpoints:d55c0d1a625ae9c8eabb6790bfe0a785">Find your Token and Endpoints</h4>

<p>First you need your Rackspace API Token. You&rsquo;ll need your API Key, and username. You can grab those in your control panel. You&rsquo;ll need to enter the following curl command into your terminal:</p>

<pre><code>curl -s -d \
'{
&quot;auth&quot;:
{
&quot;RAX-KSKEY:apiKeyCredentials&quot;:
{
&quot;username&quot;: &quot;your_username&quot;,
&quot;apiKey&quot;: &quot;your_api_key&quot;}
}
}' \
-H 'Content-Type: application/json' \
'https://identity.api.rackspacecloud.com/v2.0/tokens' | python -m json.tool
</code></pre>

<p>Where &ldquo;your_username&rdquo; and &ldquo;your_api_key&rdquo; are replaced with your own credentials. (Also use <a href="https://lon.identity.api.rackspacecloud.com/v2.0/tokens">https://lon.identity.api.rackspacecloud.com/v2.0/tokens</a> if you&rsquo;re on the other side of the pond.)</p>

<p>You&rsquo;ll get a big block of json back, and that will give you two items you&rsquo;ll need, your API Token and your Cloud Files endpoints. Everything&rsquo;s pretty well explained, but check out the full documentation <a href="http://docs.rackspace.com/loadbalancers/api/v1.0/clb-getting-started/content/Generating_Auth_Token.html">in the Rackspace Support Center</a>.</p>

<h4 id="set-your-container-to-use-an-index:d55c0d1a625ae9c8eabb6790bfe0a785">Set your container to use an index</h4>

<p>Next you&rsquo;ll need to set the container up to supply an index. This involves a few more API calls.</p>

<p>Set web listing to true. <a href="http://docs.rackspace.com/files/api/v1/cf-devguide/content/Create_Static_Website-dle4000.html">Full documentation here</a></p>

<pre><code>curl -I -X POST -H &quot;X-Container-Meta-Web-Listings:true&quot; -H &quot;X-Auth-Token:your_API_token&quot; your_cf_endpoint/your_cf_container
</code></pre>

<p>make sure to replace your own token, endpoint, and container with actual data. That should look something like:</p>

<pre><code>curl -I -X POST -H &quot;X-Container-Meta-Web-Listings:true&quot; -H &quot;X-Auth-Token:abc123def456ghi789&quot; https://storage101.dfw1.clouddrive.com/v1/MossoCloudFS_XXXXXYYYYYYAAAAABBBBCCCCCC/shares
</code></pre>

<p>And then check to see if it works:</p>

<pre><code>curl -I -X GET -H &quot;X-Auth-Token:your_API_token&quot; your_cf_endpoint/your_cf_container
</code></pre>

<p>Again, putting in your own token, endpoint, and container. If it works, you&rsquo;ll receive a message similar to this:</p>

<pre><code>HTTP/1.1 200 OK
X-Container-Meta-Web-Listings: true
Content-Length: 79
X-Container-Object-Count: 5
X-Storage-Policy: Policy-0
Accept-Ranges: bytes
X-Container-Meta-Access-Control-Expose-Headers: etag location x-timestamp x-trans-id
X-Container-Bytes-Used: 1906910
X-Timestamp: 1407898587.90657
Content-Type: text/plain; charset=utf-8
X-Trans-Id: tb49-0032be47ax5a5b80a358ee5d7edfew153
Date: Fri, 15 Aug 2014 19:20:30 GMT
</code></pre>

<p>Now when you go to your container&rsquo;s url (or the CNAME associated with it) you&rsquo;ll see a clean index of all of the included files.</p>

<p><strong>Edit:</strong> Updated from a previous version before the action developer added the CNAME functionality. Thanks Alex!</p>
</p>
          <p>15 Aug 2014
            
          </p>
          
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col s3 m1">
      
        <a class="btn-floating btn-large waves-effect waves-light" href="http://albush.com/post/xfl/"><i class="mdi-navigation-arrow-back"></i></a>
      
      </div>
      <div class="col s6 m10 center">&nbsp</div>
      <div class="col s3 m1">
      
        <a class="btn-floating btn-large waves-effect waves-light" href="http://albush.com/post/keeppeddling/"><i class="mdi-navigation-arrow-forward"></i></a>
      
      </div>
    </div>

  </div>
</div>

  <footer class="page-footer">
    <div class="footer-copyright">
      <div class="container">
      Â© 2015 Alan Bush
      <div class="right">Design <a class="grey-text text-lighten-4" href="http://pdevty.github.io/blog/">pdevty</a></div>
      </div>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="http://albush.com/js/materialize.min.js"></script>
  <script src="http://albush.com/js/init.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  </body>
</html>

